#include "Levels.hpp"

const char tutorial0[] PROGMEM = "";
const char tutorial1[] PROGMEM =
    "\n\n\tUSE THE D-PAD TO MOVE\n\tON THE SOLID ROCK\n\tAND REACH THE EXIT";
const char tutorial2[] PROGMEM = "BORDERS ARE SOLID ROCK";
const char tutorial3[] PROGMEM = "CLIMB AND DON'T GET STUCK";
const char tutorial4[] PROGMEM = "EAT FOOD TO GROW";
const char tutorial5[] PROGMEM = "TOUCH POOP TO SHRINK";
const char tutorial6[] PROGMEM = "DIG AND DON'T GET BURIED";

const Levels levelsData[Levels::levelsCount] PROGMEM = {
    /* clang-format off */
  {
    /* Tutorial, Goal,    Head,   Body,   Tail     */
    tutorial1,   6, 14,   3, 1,   2, 1,   1, 1,
    /* Rock */
    {
      0b1111111111111111, /**/
      0b1000000000000001, /**/
      0b1000000000000001, /**/
      0b1000000000000001, /**/
      0b1000000000000001, /**/
      0b1000000000000001, /**/
      0b1000000000000001, /**/
      0b1111111111111111, /**/
    },
    /* Soil */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Food */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Poop */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    }
  },
  {
    /* Tutorial, Goal,    Head,   Body,   Tail     */
    tutorial2,   7, 14,   3, 1,   2, 1,   1, 1,
    /* Rock */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Soil */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Food */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Poop */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    }
  },
  {
    /* Tutorial, Goal,    Head,   Body,   Tail     */
    tutorial3,   6, 14,   3, 1,   2, 1,   1, 1,
    /* Rock */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000001000110000, /**/
      0b0000011100010000, /**/
      0b1111111111111111, /**/
    },
    /* Soil */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Food */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Poop */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    }
  },
  {
    /* Tutorial, Goal,    Head,   Body,   Tail     */
    tutorial4,   6, 11,   3, 1,   2, 1,   1, 1,
    /* Rock */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000100000111101, /**/
      0b0000000000100001, /**/
      0b0000100000101101, /**/
      0b0000100000101101, /**/
      0b1111111111111111, /**/
    },
    /* Soil */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Food */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000100000000000, /**/
      0b0000000000000000, /**/
      0b0000100000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Poop */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    }
  },
  {
    /* Tutorial, Goal,    Head,   Body,   Tail     */
    tutorial5,   6, 11,   3, 1,   2, 1,   1, 1,
    /* Rock */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000100000111101, /**/
      0b0000000000100001, /**/
      0b0000100000101101, /**/
      0b0000100000101101, /**/
      0b1111111111111111, /**/
    },
    /* Soil */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Food */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000100000000000, /**/
      0b0000000000000000, /**/
      0b0000100000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Poop */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000110000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    }
  },
  {
    /* Tutorial, Goal,    Head,   Body,   Tail     */
    tutorial6,   0, 15,   3, 1,   2, 1,   1, 1,
    /* Rock */
    {
      0b0000000000000000, /**/
      0b0000000000000001, /**/
      0b0000000000000001, /**/
      0b0000000000000001, /**/
      0b0000000000000001, /**/
      0b0000000000000001, /**/
      0b0000000000000001, /**/
      0b0000000000000001, /**/
    },
    /* Soil */
    {
      0b0000000000000000, /**/
      0b0011100000111111, /**/
      0b0011100000111111, /**/
      0b0011100000111111, /**/
      0b0011111111111111, /**/
      0b0011111111111111, /**/
      0b0011111111111111, /**/
      0b0011111111111111, /**/
    },
    /* Food */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Poop */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    }
  },
  {
    /* Tutorial, Goal,    Head,   Body,   Tail     */
    tutorial0,   1, 0,    3, 0,   4, 0,   5, 0,
    /* Rock */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b1110000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000111, /**/
      0b0000000000000011, /**/
      0b1100000000000001, /**/
      0b1100000000000000, /**/
    },
    /* Soil */
    {
      0b0010000000011000, /**/
      0b0010111111001000, /**/
      0b1110111111111000, /**/
      0b0010000000000000, /**/
      0b0011111111110000, /**/
      0b0011110000000000, /**/
      0b0001100000000000, /**/
      0b0000000000000000, /**/
    },
    /* Food */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    },
    /* Poop */
    {
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
      0b0000000000000000, /**/
    }
  },
    /* clang-format on */
};

const char* Levels::tutorial() const {
  return pgm_read_ptr(&_tutorial);
}

const void Levels::goal(Cell* res) const {
  res->x = pgm_read_byte(&_goalX);
  res->y = pgm_read_byte(&_goalY);
}

const void Levels::head(Cell* res) const {
  res->x = pgm_read_byte(&_headX);
  res->y = pgm_read_byte(&_headY);
}

const void Levels::body(Cell* res) const {
  res->x = pgm_read_byte(&_bodyX);
  res->y = pgm_read_byte(&_bodyY);
}

const void Levels::tail(Cell* res) const {
  res->x = pgm_read_byte(&_tailX);
  res->y = pgm_read_byte(&_tailY);
}

const void Levels::rock(uint16_t* res) const {
  for (uint8_t row = 0; row < 8; row++) {
    res[row] = pgm_read_word(&_rock[row]);
  }
}

const void Levels::soil(uint16_t* res) const {
  for (uint8_t row = 0; row < 8; row++) {
    res[row] = pgm_read_word(&_soil[row]);
  }
}

const void Levels::food(uint16_t* res) const {
  for (uint8_t row = 0; row < 8; row++) {
    res[row] = pgm_read_word(&_food[row]);
  }
}

const void Levels::poop(uint16_t* res) const {
  for (uint8_t row = 0; row < 8; row++) {
    res[row] = pgm_read_word(&_poop[row]);
  }
}

const void Levels::setupCells(Cell* rGoal,
                              Cell* rHead,
                              Cell* rBody,
                              Cell* rTail,
                              const uint8_t id) {
  levelsData[id].goal(rGoal);
  levelsData[id].head(rHead);
  levelsData[id].body(rBody);
  levelsData[id].tail(rTail);
}

const void Levels::setupTiles(uint16_t* rRock,
                              uint16_t* rSoil,
                              uint16_t* rFood,
                              uint16_t* rPoop,
                              const uint8_t id) {
  levelsData[id].rock(rRock);
  levelsData[id].soil(rSoil);
  levelsData[id].food(rFood);
  levelsData[id].poop(rPoop);
}

const char* Levels::tutorial(const uint8_t id) {
  return levelsData[id].tutorial();
}
